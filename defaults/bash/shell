#!/bin/bash

# ---- Logging helper ----
log() {
    echo "[OMAKUB] $1"
}

log "Starting shell setup..."

# ---- History control ----
shopt -s histappend && log "History append enabled"
HISTCONTROL=ignoreboth && log "HISTCONTROL set to ignoreboth"
HISTSIZE=32768 && log "HISTSIZE set to $HISTSIZE"
HISTFILESIZE="${HISTSIZE}" && log "HISTFILESIZE set to $HISTFILESIZE"

# ---- Autocompletion ----
if [ -f /usr/share/bash-completion/bash_completion ]; then
    source /usr/share/bash-completion/bash_completion && log "Bash completion loaded"
else
    log "Warning: Bash completion file not found"
fi

# ---- Set PATH ----
export PATH="./bin:$HOME/.local/bin:$HOME/.local/share/omakub/bin:$PATH" && log "PATH updated to include Omakub and local bin"
set +h && log "Disabled hashall (set +h)"

# ---- Set Omakub path ----
export OMAKUB_PATH="$HOME/.local/share/omakub" && log "OMAKUB_PATH set to $OMAKUB_PATH"

log "Shell setup steps completed"
